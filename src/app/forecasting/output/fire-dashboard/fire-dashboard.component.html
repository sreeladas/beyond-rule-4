<div *ngIf="calculateInput">
  <!-- Tax Information -->
  <div class="mb-4 text-muted small">
    Based on a blended tax rate of {{ blendedTaxRate.toFixed(1) }}%, calculated
    from the current portfolio distribution of
    {{ taxFreePercentage.toFixed(0) }}% tax-free,
    {{ taxDeferredPercentage.toFixed(0) }}% tax-deferred, and
    {{ taxablePercentage.toFixed(0) }}% taxable investments.
  </div>

  <!-- FIRE Targets -->
  <div class="mb-4">
    <h4 class="fw-light mb-3">FIRE Numbers</h4>
    <div class="row">
      <div class="col-md-3 mb-3">
        <div class="text-muted small">Annual Expenses</div>
        <div class="h4 mb-0">
          {{ formatCurrency(calculateInput.annualExpenses) }}
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="text-muted small">FIRE Number (Tax-Adjusted)</div>
        <div class="h4 mb-0">{{ formatCurrency(calculateInput.fiNumber) }}</div>
      </div>
    </div>
  </div>

  <!-- Coast FIRE Scenarios -->
  <div class="mb-4">
    <h4 class="fw-light mb-3">Coast FIRE Numbers Today</h4>
    <div class="row">
      <div class="col-md-3 mb-3">
        <div class="text-muted small">Conservative (+5 years)</div>
        <div class="h4 mb-1">
          {{ formatCurrency(calculateInput.coastFirePlusFive) }}
        </div>
        <div class="small text-muted">
          Retire at age {{ calculateInput.retirementAge + 5 }}
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="text-muted small">Baseline</div>
        <div class="h4 mb-1">
          {{ formatCurrency(calculateInput.coastFireNumber) }}
        </div>
        <div class="small text-muted">
          Retire at age {{ calculateInput.retirementAge }}
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="text-muted small">Aggressive (-5 years)</div>
        <div class="h4 mb-1">
          {{ formatCurrency(calculateInput.coastFireMinusFive) }}
        </div>
        <div class="small text-muted">
          Retire at age {{ calculateInput.retirementAge - 5 }}
        </div>
      </div>
    </div>
  </div>

  <!-- Coast Years Analysis -->
  <div class="mb-4">
    <h4 class="fw-light mb-3">Coast Years Analysis</h4>
    <div class="row">
      <div class="col-md-3 mb-3">
        <div class="text-muted small">Coast Working Years</div>
        <div class="h4 mb-0">{{ calculateInput.coastYearsRange }}</div>
        <div class="small text-muted">Based on the above assumptions, your current portfolio will groe into enough to cover expenses in roughly this many years. In other words, if you do not contribute any more to savings, you would need to work this much longer.</div>
      </div>
    </div>
  </div>

  <!-- Achievement Dates -->
  <div
    *ngIf="
      forecast &&
      (coastFirePlusFiveAchievedDate ||
        coastFireAchievedDate ||
        coastFireMinusFiveAchievedDate ||
        fireAchievedDate)
    "
  >
    <h4 class="fw-light mb-3">Projected Achievement Dates</h4>
    <div class="row">
      <div class="col-md-3 mb-3" *ngIf="coastFirePlusFiveAchievedDate">
        <div class="text-muted small">Coast FIRE (+5y)</div>
        <div class="h5 mb-0">{{ coastFirePlusFiveAchievedDate }}</div>
      </div>
      <div class="col-md-3 mb-3" *ngIf="coastFireAchievedDate">
        <div class="text-muted small">Coast FIRE</div>
        <div class="h5 mb-0">{{ coastFireAchievedDate }}</div>
      </div>
      <div class="col-md-3 mb-3" *ngIf="coastFireMinusFiveAchievedDate">
        <div class="text-muted small">Coast FIRE (-5y)</div>
        <div class="h5 mb-0">{{ coastFireMinusFiveAchievedDate }}</div>
      </div>
      <div class="col-md-3 mb-3" *ngIf="fireAchievedDate">
        <div class="text-muted small">Full FIRE</div>
        <div class="h5 mb-0">{{ fireAchievedDate }}</div>
      </div>
    </div>
  </div>
</div>
