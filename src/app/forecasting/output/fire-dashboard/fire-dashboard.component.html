<div *ngIf="calculateInput">
  <!-- FIRE Targets -->
  <div class="mb-4">
    <h4 class="fw-light mb-3">FIRE Numbers</h4>
    <div class="row">
      <div class="col-md-3 mb-3">
        <div class="text-muted small">Annual Expenses</div>
        <div class="h4 mb-0">
          {{ formatCurrency(calculateInput.annualExpenses) }}
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div
          class="progress-card"
          [style.--progress]="progressPercent(calculateInput.fiNumber) + '%'"
          [ngbTooltip]="
            (progressPercent(calculateInput.fiNumber) | number: '1.0-0') +
            '% funded'
          "
          triggers="hover"
          container="body"
        >
          <div
            class="text-muted small"
            ngbTooltip="The total portfolio value needed so that withdrawals at your 
            safe withdrawal rate cover your annual expenses, adjusted for estimated taxes on withdrawals.
            Based on a blended tax rate of {{ blendedTaxRate.toFixed(1) }}% ({{
              taxFreePercentage.toFixed(0)
            }}% tax-free, {{
              taxDeferredPercentage.toFixed(0)
            }}% tax-deferred, {{ taxablePercentage.toFixed(0) }}% taxable)."
            placement="top"
            triggers="click:blur hover"
            container="body"
          >
            FIRE Number (Tax-Adjusted) <i class="fas fa-info-circle"></i>
          </div>
          <div class="h4 mb-0">
            {{ formatCurrency(calculateInput.fiNumber) }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Coast FIRE Scenarios -->
  <div class="mb-4">
    <h4 class="fw-light mb-3">
      <span
        ngbTooltip="Coast FIRE is the amount you need saved today so that investment growth alone will reach your FIRE Number by retirement â€” without any further contributions."
        placement="top"
        triggers="click:blur hover"
        container="body"
        >Coast FIRE Numbers Today <i class="fas fa-info-circle small"></i
      ></span>
    </h4>
    <div class="row">
      <div class="col-md-3 mb-3">
        <div
          class="progress-card"
          [style.--progress]="
            progressPercent(calculateInput.coastFirePlusFive) + '%'
          "
          [ngbTooltip]="
            (progressPercent(calculateInput.coastFirePlusFive)
              | number: '1.0-0') + '% funded'
          "
          triggers="hover"
          container="body"
        >
          <div class="text-muted small">Conservative (+5 years)</div>
          <div class="h4 mb-1">
            {{ formatCurrency(calculateInput.coastFirePlusFive) }}
          </div>
          <div class="small text-muted">
            Retire at age {{ calculateInput.retirementAge + 5 }}
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div
          class="progress-card"
          [style.--progress]="
            progressPercent(calculateInput.coastFireNumber) + '%'
          "
          [ngbTooltip]="
            (progressPercent(calculateInput.coastFireNumber)
              | number: '1.0-0') + '% funded'
          "
          triggers="hover"
          container="body"
        >
          <div class="text-muted small">Baseline</div>
          <div class="h4 mb-1">
            {{ formatCurrency(calculateInput.coastFireNumber) }}
          </div>
          <div class="small text-muted">
            Retire at age {{ calculateInput.retirementAge }}
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div
          class="progress-card"
          [style.--progress]="
            progressPercent(calculateInput.coastFireMinusFive) + '%'
          "
          [ngbTooltip]="
            (progressPercent(calculateInput.coastFireMinusFive)
              | number: '1.0-0') + '% funded'
          "
          triggers="hover"
          container="body"
        >
          <div class="text-muted small">Aggressive (-5 years)</div>
          <div class="h4 mb-1">
            {{ formatCurrency(calculateInput.coastFireMinusFive) }}
          </div>
          <div class="small text-muted">
            Retire at age {{ calculateInput.retirementAge - 5 }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Years of Working at Coast -->
  <div class="mb-4">
    <h4 class="fw-light mb-3">
      <span
        ngbTooltip="Your current portfolio would grow into enough to cover expenses in roughly this many years. In other words, if you do not contribute any more to savings, you would need to work this much longer."
        placement="top"
        triggers="click:blur hover"
        container="body"
      >
        Years of Working at Coast <i class="fas fa-info-circle"></i>
      </span>
    </h4>
    <div class="row">
      <div class="h4 mb-0">{{ calculateInput.coastYearsRange }}</div>
    </div>
  </div>

  <!-- Achievement Dates -->
  <div
    *ngIf="
      forecast &&
      (coastFirePlusFiveAchievedDate ||
        coastFireAchievedDate ||
        coastFireMinusFiveAchievedDate ||
        fireAchievedDate)
    "
  >
    <h4 class="fw-light mb-3">Projected Achievement Dates</h4>
    <div class="row">
      <div class="col-md-3 mb-3" *ngIf="coastFirePlusFiveAchievedDate">
        <div class="text-muted small">Coast FIRE (+5y)</div>
        <div class="h5 mb-0">{{ coastFirePlusFiveAchievedDate }}</div>
      </div>
      <div class="col-md-3 mb-3" *ngIf="coastFireAchievedDate">
        <div class="text-muted small">Coast FIRE</div>
        <div class="h5 mb-0">{{ coastFireAchievedDate }}</div>
      </div>
      <div class="col-md-3 mb-3" *ngIf="coastFireMinusFiveAchievedDate">
        <div class="text-muted small">Coast FIRE (-5y)</div>
        <div class="h5 mb-0">{{ coastFireMinusFiveAchievedDate }}</div>
      </div>
      <div class="col-md-3 mb-3" *ngIf="fireAchievedDate">
        <div class="text-muted small">Full FIRE</div>
        <div class="h5 mb-0">{{ fireAchievedDate }}</div>
      </div>
    </div>
  </div>
</div>
